{"remainingRequest":"/Users/txf/Desktop/VulnFind/vulnfind-vue/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/txf/Desktop/VulnFind/vulnfind-vue/src/views/user/Users.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/txf/Desktop/VulnFind/vulnfind-vue/src/views/user/Users.vue","mtime":1614939427515},{"path":"/Users/txf/Desktop/VulnFind/vulnfind-vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/txf/Desktop/VulnFind/vulnfind-vue/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/txf/Desktop/VulnFind/vulnfind-vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/txf/Desktop/VulnFind/vulnfind-vue/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7ZmluZFVzZXJMaXN0LCBkZWxVc2VyLCBzYXZlVXNlciwgZGVsZXRlSW1nRmlsZX0gZnJvbSAnQC9hcGkvdXNlcnMnCmltcG9ydCB7IGZpbmREZXB0QW5kQ291bnQgfSBmcm9tICdAL2FwaS9kZXB0JwoKaW1wb3J0IFVzZXJBZGQgIGZyb20gJ0Avdmlld3MvdXNlci9Vc2VyQWRkJwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdVc2VycycsCiAgZGF0YSAoKSB7CiAgICByZXR1cm4gewogICAgICBhZGRPclVwZGF0ZVZpc2libGU6IGZhbHNlLAogICAgICB1c2VyVk86IHsKICAgICAgICBkZXBhcnRtZW50SWQ6IDEsCiAgICAgICAgdXNlcm5hbWU6ICcnLAogICAgICAgIGVtYWlsOiAnJwogICAgICB9LAogICAgICBmb3JtSW5saW5lOiB7CiAgICAgICAgdXNlcjogJycsCiAgICAgICAgZW1haWw6ICcnLAogICAgICAgIGNpdHk6ICcnLAogICAgICAgIHJhZGlvOiAnMScKICAgICAgfSwKICAgICAgdXNlcmxpc3Q6IFtdLAogICAgICBzaXplOiAzLAogICAgICBjdXJyZW50OiAxLAogICAgICB0b3RhbDogMCwKICAgICAgZGVwYXJ0bWVudHM6IFtdCiAgICB9CiAgfSwKICBjb21wb25lbnRzOiB7CiAgICBVc2VyQWRkCiAgfSwKICBjcmVhdGVkICgpIHsKICAgIHRoaXMuZ2V0VXNlckxpc3QoKQogICAgdGhpcy5nZXREZXB0QW5kQ291bnQoKQogIH0sCiAgbWV0aG9kczogewogICAgaGFuZGxlU2l6ZUNoYW5nZSAodmFsKSB7CiAgICAgIHRoaXMuc2l6ZSA9IHZhbAogICAgICB0aGlzLmdldFVzZXJMaXN0KCkKICAgIH0sCiAgICBoYW5kbGVDdXJyZW50Q2hhbmdlICh2YWwpIHsKICAgICAgdGhpcy5jdXJyZW50ID0gdmFsCiAgICAgIHRoaXMuZ2V0VXNlckxpc3QoKQogICAgfSwKICAgIGFzeW5jIGdldFVzZXJMaXN0ICgpIHsKICAgICAgY29uc3QgeyBkYXRhIH0gPSBhd2FpdCBmaW5kVXNlckxpc3QodGhpcy5jdXJyZW50LCB0aGlzLnNpemUsIHRoaXMudXNlclZPKQogICAgICB0aGlzLnVzZXJsaXN0ID0gZGF0YS5kYXRhLnJlY29yZHMKICAgICAgdGhpcy50b3RhbCA9IGRhdGEuZGF0YS50b3RhbAogICAgfSwKICAgIGFzeW5jIGdldERlcHRBbmRDb3VudCAoKSB7CiAgICAgIGNvbnN0IHsgZGF0YSB9ID0gYXdhaXQgZmluZERlcHRBbmRDb3VudCgpCiAgICAgIHRoaXMuZGVwYXJ0bWVudHMgPSBkYXRhLmRhdGEKICAgIH0sCiAgICByZXNldFVzZXJWTyAoKSB7CiAgICAgIHRoaXMudXNlclZPLmRlcGFydG1lbnRJZCA9ICcnCiAgICAgIHRoaXMudXNlclZPLmVtYWlsID0gJycKICAgICAgdGhpcy51c2VyVk8udXNlcm5hbWUgPSAnJwogICAgICB0aGlzLmdldFVzZXJMaXN0KCkKICAgIH0sCiAgICBzaG93ICgpIHsKICAgICAgdGhpcy5hZGRPclVwZGF0ZVZpc2libGUgPSB0cnVlCiAgICB9LAogICAgc2hvd0FkZE9yVXBkYXRlIChkYXRhKSB7CiAgICAgIGlmIChkYXRhID09PSAnZmFsc2UnKSB7CiAgICAgICAgdGhpcy5hZGRPclVwZGF0ZVZpc2libGUgPSBmYWxzZQogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuYWRkT3JVcGRhdGVWaXNpYmxlID0gdHJ1ZQogICAgICB9CiAgICB9LAoKICAgIC8qKgogICAgICog5Yig6Zmk55So5oi3CiAgICAgKi8KICAgIGFzeW5jIGRlbChpZCkgewogICAgICB2YXIgcmVzID0gYXdhaXQgdGhpcy4kY29uZmlybSgKICAgICAgICAgICLmraTmk43kvZzlsIbmsLjkuYXliKDpmaTor6XnlKjmiLcsIOaYr+WQpue7p+e7rT8iLAogICAgICAgICAgIuaPkOekuiIsCiAgICAgICAgICB7CiAgICAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAi56Gu5a6aIiwKICAgICAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogIuWPlua2iCIsCiAgICAgICAgICAgIHR5cGU6ICJ3YXJuaW5nIgogICAgICAgICAgfQogICAgICApLmNhdGNoKCgpID0+IHsKICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgIHR5cGU6ICJpbmZvIiwKICAgICAgICAgIG1lc3NhZ2U6ICLlt7Llj5bmtojliKDpmaQiCiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgICBpZiAocmVzID09ICJjb25maXJtIikgewogICAgICAgIGNvbnN0IHsgZGF0YTogcmVzIH0gPSBhd2FpdCBkZWxVc2VyKGlkKTsKICAgICAgICBjb25zb2xlLmxvZyhyZXMpOwogICAgICAgIGlmIChyZXMuY29kZSA9PSAyMDApIHsKICAgICAgICAgIHRoaXMuJG5vdGlmeS5zdWNjZXNzKHsKICAgICAgICAgICAgdGl0bGU6J+aTjeS9nOaIkOWKnycsCiAgICAgICAgICAgIG1lc3NhZ2U6J+eUqOaIt+WIoOmZpOaIkOWKnycsCiAgICAgICAgICB9KTsKICAgICAgICAgIHRoaXMuZ2V0VXNlckxpc3QoKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcihyZXMubXNnKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCgogICAgICB9CiAgICB9Cgo="},{"version":3,"sources":["Users.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiHA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA","file":"Users.vue","sourceRoot":"src/views/user","sourcesContent":["<template>\n  <div>\n    <el-breadcrumb separator=\"/\" style=\"padding-left: 10px;padding-bottom: 10px;font-size: 12px\">\n      <el-breadcrumb-item :to=\"{ path: '/home' }\">首页</el-breadcrumb-item>\n      <el-breadcrumb-item>系统管理</el-breadcrumb-item>\n      <el-breadcrumb-item>用户管理</el-breadcrumb-item>\n    </el-breadcrumb>\n    <el-card class=\"box-card\" >\n      <el-form :inline=\"true\" :model=\"userVO\" class=\"demo-form-inline\">\n        <el-form-item label=\"角色\" lable-with=\"70px\">\n        <el-select v-model=\"userVO.departmentId\" placeholder=\"请选择\">\n\n          <el-option\n              v-for=\"item in departments\"\n              :key=\"item.id\"\n              :label=\"item.name\"\n              :value=\"item.id\">\n            <span style=\"float: left\">{{ item.name }}</span>\n            <span style=\"float: right; color: #8492a6; font-size: 13px\">\n              <span class=\"el-tag el-tag--success el-tag--mini el-tag--plain\">{{ item.deptCount }}</span>\n            </span>\n          </el-option>\n\n        </el-select>\n        </el-form-item>\n        <el-form-item label=\"用户名\" lable-with=\"200px\">\n          <el-input v-model=\"userVO.username\" placeholder=\"请输入用户名\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"邮箱\" lable-with=\"200px\">\n          <el-input clearable v-model=\"userVO.email\" placeholder=\"请输入邮箱\"></el-input>\n        </el-form-item>\n        <el-form-item style=\"margin-left: 500px\">\n          <el-button type=\"primary\" icon=\"el-icon-search\" @click=\"getUserList\">查询</el-button>\n\n          <el-button type=\"success\" icon=\"el-icon-plus\" @click=\"show\">添加</el-button>\n\n          <el-button icon=\"el-icon-refresh\" @click=\"resetUserVO\">重置</el-button>\n\n        </el-form-item>\n      </el-form >\n      <el-table\n          :data=\"userlist\"\n          border\n          max-height=\"800\"\n          style=\"width: 100%;\">\n        <el-table-column\n            sortable\n            prop=\"id\"\n            label=\"id\"\n            width=\"100\">\n        </el-table-column>\n        <el-table-column\n            prop=\"name\"\n            label=\"角色\"\n            width=\"100\">\n          <template slot-scope=\"scope\">\n            <span class=\"el-tag el-tag--success el-tag--mini el-tag--dark\">\n              {{scope.row.departmentId==1?'管理员':scope.row.departmentId==2?'普通用户':'访客'}}</span>\n          </template>\n        </el-table-column>\n        <el-table-column\n            prop=\"username\"\n            label=\"用户名\"\n            width=\"200\">\n        </el-table-column>\n        <el-table-column\n            prop=\"email\"\n            label=\"邮箱\"\n            width=\"350\">\n        </el-table-column>\n        <el-table-column\n            sortable\n            prop=\"created\"\n            label=\"创建日期\"\n            width=\"250\">\n        </el-table-column>\n        <el-table-column\n            prop=\"status\"\n            label=\"是否启用\"\n            width=\"100\">\n          <template slot-scope=\"scope\">\n            <el-switch\n                v-model=\"scope.row.status==1\"\n                active-color=\"#13ce66\"\n                inactive-color=\"#ff4949\">\n            </el-switch>\n          </template>\n        </el-table-column>\n        <el-table-column\n            label=\"操作\">\n          <template slot-scope=\"scope\">\n            <el-button type=\"primary\" size=\"mini\" icon=\"el-icon-edit\"></el-button>\n            <el-button type=\"danger\" size=\"mini\" icon=\"el-icon-delete\" @click=\"del(scope.row.id)\"></el-button>\n            <el-button type=\"warning\" size=\"mini\" icon=\"el-icon-s-tools\"></el-button>\n          </template>\n        </el-table-column>\n      </el-table>\n      <el-pagination\n          style=\"padding-top: 15px;height: 60px\"\n          @size-change=\"handleSizeChange\"\n          @current-change=\"handleCurrentChange\"\n          :current-page=current\n          :page-sizes=\"[3, 5, 10]\"\n          :page-size=size\n          layout=\"total, sizes, prev, pager, next, jumper\"\n          :total=\"total\">\n      </el-pagination>\n    </el-card>\n    <UserAdd :addOrUpdateVisible=\"addOrUpdateVisible\" @changeShow=\"showAddOrUpdate\" ref=\"addOrUpdateRef\"></UserAdd>\n</div>\n</template>\n\n<script>\nimport {findUserList, delUser, saveUser, deleteImgFile} from '@/api/users'\nimport { findDeptAndCount } from '@/api/dept'\n\nimport UserAdd  from '@/views/user/UserAdd'\n\nexport default {\n  name: 'Users',\n  data () {\n    return {\n      addOrUpdateVisible: false,\n      userVO: {\n        departmentId: 1,\n        username: '',\n        email: ''\n      },\n      formInline: {\n        user: '',\n        email: '',\n        city: '',\n        radio: '1'\n      },\n      userlist: [],\n      size: 3,\n      current: 1,\n      total: 0,\n      departments: []\n    }\n  },\n  components: {\n    UserAdd\n  },\n  created () {\n    this.getUserList()\n    this.getDeptAndCount()\n  },\n  methods: {\n    handleSizeChange (val) {\n      this.size = val\n      this.getUserList()\n    },\n    handleCurrentChange (val) {\n      this.current = val\n      this.getUserList()\n    },\n    async getUserList () {\n      const { data } = await findUserList(this.current, this.size, this.userVO)\n      this.userlist = data.data.records\n      this.total = data.data.total\n    },\n    async getDeptAndCount () {\n      const { data } = await findDeptAndCount()\n      this.departments = data.data\n    },\n    resetUserVO () {\n      this.userVO.departmentId = ''\n      this.userVO.email = ''\n      this.userVO.username = ''\n      this.getUserList()\n    },\n    show () {\n      this.addOrUpdateVisible = true\n    },\n    showAddOrUpdate (data) {\n      if (data === 'false') {\n        this.addOrUpdateVisible = false\n      } else {\n        this.addOrUpdateVisible = true\n      }\n    },\n\n    /**\n     * 删除用户\n     */\n    async del(id) {\n      var res = await this.$confirm(\n          \"此操作将永久删除该用户, 是否继续?\",\n          \"提示\",\n          {\n            confirmButtonText: \"确定\",\n            cancelButtonText: \"取消\",\n            type: \"warning\"\n          }\n      ).catch(() => {\n        this.$message({\n          type: \"info\",\n          message: \"已取消删除\"\n        });\n      });\n      if (res == \"confirm\") {\n        const { data: res } = await delUser(id);\n        console.log(res);\n        if (res.code == 200) {\n          this.$notify.success({\n            title:'操作成功',\n            message:'用户删除成功',\n          });\n          this.getUserList();\n        } else {\n          this.$message.error(res.msg);\n        }\n      }\n    },\n\n      }\n    }\n\n</script>\n\n<style scoped>\n\n</style>\n"]}]}